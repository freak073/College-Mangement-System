<div class="feature-hero glassy-3d" style="margin: 2.5rem auto; max-width: 900px;">
  <h1 class="gradient-text-3d">Gradebook</h1>
  <form class="glass-form-3d mb-4" (ngSubmit)="editingIndex === null ? addRecord() : updateRecord()">
    <div class="row g-3 align-items-end">
      <div class="col-md-2">
        <label class="form-label-3d">Course</label>
        <select class="form-control-3d" [(ngModel)]="selectedCourse" name="course" (ngModelChange)="newRecord.course = $event; newRecord.class = ''; newRecord.student = ''" required>
          <option value="" disabled selected>Select Course</option>
          <option *ngFor="let c of courses" [value]="c">{{c}}</option>
        </select>
      </div>
      <div class="col-md-2">
        <label class="form-label-3d">Class</label>
        <select class="form-control-3d" [(ngModel)]="selectedClass" name="class" (ngModelChange)="newRecord.class = $event; newRecord.student = ''" [disabled]="!selectedCourse" required>
          <option value="" disabled selected>Select Class</option>
          <option *ngFor="let cl of getAvailableClasses()" [value]="cl">{{cl}}</option>
        </select>
      </div>
      <div class="col-md-3">
        <label class="form-label-3d">Student</label>
        <select class="form-control-3d" [(ngModel)]="newRecord.student" name="student" [disabled]="!selectedClass" required>
          <option value="" disabled selected>Select Student</option>
          <option *ngFor="let s of getAvailableStudents()" [value]="s">{{s}}</option>
        </select>
      </div>
      <div class="col-md-2">
        <label class="form-label-3d">Grade</label>
        <input class="form-control-3d" placeholder="e.g. A+" [(ngModel)]="newRecord.grade" name="grade" required />
      </div>
      <div class="col-md-2 d-flex align-items-end">
        <button class="btn btn-3d-gradient w-100" type="submit">
          <i class="bi" [ngClass]="editingIndex === null ? 'bi-plus-circle' : 'bi-check-circle'"></i>
          {{ editingIndex === null ? 'Add' : 'Update' }}
        </button>
        <button *ngIf="editingIndex !== null" class="btn btn-glass-3d ms-2 w-100" type="button" (click)="resetForm()">
          <i class="bi bi-x-circle"></i> Cancel
        </button>
      </div>
    </div>
  </form>
  <div class="table-responsive">
    <table class="table glass-table-3d align-middle professional-table">
      <thead>
        <tr>
          <th>Course</th>
          <th>Class</th>
          <th>Student</th>
          <th>Grade</th>
          <th class="text-center">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let g of gradebook; let i = index" class="table-row-3d">
          <td>{{g.course}}</td>
          <td>{{g.class}}</td>
          <td>{{g.student}}</td>
          <td><span class="action-badge view">{{g.grade}}</span></td>
          <td class="text-center">
            <button class="action-badge edit" (click)="editRecord(i)"><i class="bi bi-pencil-square"></i> Edit</button>
            <button class="action-badge delete" (click)="deleteRecord(i)"><i class="bi bi-trash"></i> Delete</button>
          </td>
        </tr>
        <tr *ngIf="gradebook.length === 0">
          <td colspan="5" class="text-center text-muted">No grade records yet.</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
